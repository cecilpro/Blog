/**
 * Created by Dearvee on 2017/5/7.
 */

function createBoard(c,r,o,k){if(!k){k="#666666"}var p=document.createElement("textarea");var e=document.createAttribute("class");e.value="boarder_css";p.setAttribute("name","boarder");p.setAttributeNode(e);p.style.background=k;p.setAttribute("placeholder","在这里输入文本");var g=document.createElement("span");var e=document.createAttribute("class");e.value="order_css";g.setAttributeNode(e);if(c){var q=document.createElement("span");var e=document.createAttribute("class");e.value="parent_css";q.setAttributeNode(e);q.style.left=o.split("*")[0];q.style.top=o.split("*")[1];q.style.background=k;q.style.zIndex=j++;var f=document.createElement("form");f.setAttribute("action","submit.php");f.setAttribute("target","action");var h=document.createElement("input");h.setAttribute("type","text");h.setAttribute("name","pos_color");h.style.display="none";var a=document.createElement("input");a.setAttribute("type","color");var e=document.createAttribute("class");e.value="able_css";a.setAttributeNode(e);a.style.width="50px";a.style.right="50px";a.style.outline="none";a.value="#666666";a.oninput=function(){q.style.background=a.value;p.style.background=a.value};var m=document.createElement("input");m.setAttribute("type","submit");var e=document.createAttribute("class");e.value="able_css";m.setAttributeNode(e);m.style.width="50px";m.style.height="22px";m.innerHTML="留言";m.addEventListener("click",function(){submit_flag=true;q.style.display="none";o=q.style.left.toString()+"*"+q.style.top.toString();k=a.value;h.value=o+k;createBoard(false,p.value,o,k)});f.appendChild(h);f.appendChild(m);f.appendChild(a);f.appendChild(p);q.appendChild(f);document.body.appendChild(q);var l=q}else{p.value=r;p.style.cursor="move";p.style.left=o.split("*")[0];p.style.top=o.split("*")[1];p.style.zIndex=j++;p.readOnly="true";p.appendChild(g);document.body.appendChild(p);var l=p}i++;var n=document.getElementById("body");l.addEventListener("mousedown",function(d){l.style.zIndex=j++;var b;var s=l.offsetLeft;var t=l.offsetTop;if((c&&(d.clientY-t<20||d.clientY-t>160||d.clientX-s<20||d.clientX-s>205))||!c){b=true}n.addEventListener("mousemove",function(u){if(b){l.style.left=s+u.clientX-d.clientX+"px";l.style.top=t+u.clientY-d.clientY+"px"}});n.addEventListener("mouseup",function(){b=false})})};